BÁO CÁO CHỨC NĂNG HỆ THỐNG BOOKZONE
Ngày: 27/12/2025

1) Trang Khách Hàng (Website khách)
- Trang chủ: hiển thị Sản phẩm nổi bật, Bán chạy, Mới về.
- Danh sách sản phẩm: tìm kiếm theo từ khóa; lọc theo danh mục, giá tối thiểu/tối đa, nhà cung cấp, nhà xuất bản; sắp xếp theo tiêu chí; hiển thị khoảng giá toàn cục.
- Xem chi tiết sản phẩm: xem thông tin chi tiết và danh sách đánh giá; khách đã mua có thể gửi đánh giá (1-5 sao, bình luận).
- Giỏ hàng: thêm/xóa/cập nhật số lượng; hỗ trợ giỏ khách (khi chưa đăng nhập) và tự động chuyển giỏ khách sang giỏ tài khoản sau khi đăng nhập.
- Thanh toán: chọn địa chỉ giao hàng; phương thức thanh toán (mặc định: tiền mặt); kiểm tra tồn kho trước khi tạo đơn; tạo đơn thành công thì xóa giỏ.
- Tài khoản: xem và cập nhật hồ sơ (họ tên, ngày sinh, sdt, địa chỉ); quản lý địa chỉ (thêm/sửa/xóa); danh sách yêu thích; xem đơn hàng đã đặt.
- Xác thực: đăng ký, đăng nhập bằng email/mật khẩu; đăng nhập Google OAuth; đăng xuất; đổi mật khẩu (yêu cầu mật khẩu hiện tại); quy trình quên mật khẩu (gửi mã, xác minh mã, đặt lại).
- Thông báo: đếm số chưa đọc; hiển thị danh sách thông báo; đánh dấu đọc/chưa đọc; lưu trữ thông báo.
- Nội dung tĩnh: liên hệ, giới thiệu, chính sách đổi trả, chính sách bảo hành, vận chuyển và giao nhận, chính sách bảo mật.

2) Trang Nội Bộ (Phân quyền vai trò)
- Vai trò hệ thống: Admin, Quản lý (quanly), Nhân viên (nhanvien); kiểm tra quyền truy cập theo trang.
- Đăng nhập nội bộ, đăng xuất; bảo vệ trang bằng kiểm tra session và role.
- Bảng điều khiển (Admin/Quản lý): thống kê doanh thu, số đơn hàng, giá trị đơn trung bình; so sánh kỳ trước; top sản phẩm bán chạy; đơn gần đây; đồ thị doanh thu theo ngày; cảnh báo tồn kho thấp; sản phẩm bán chậm; tóm tắt doanh thu theo kỳ.
- Quản lý sản phẩm (Admin/Quản lý): danh sách có tìm kiếm/phân trang; thêm/sửa/xóa sản phẩm; upload ảnh sản phẩm (kiểm tra MIME/kích thước); hỗ trợ hai loại: Sách (NXB, tác giả, loại sách, năm XB) và VPP (tên VPP); chỉnh giá, mô tả, tồn kho, NCC.
- Quản lý đơn hàng (Admin/Quản lý/Nhân viên): danh sách có tìm kiếm/phân trang; xem chi tiết; cập nhật trạng thái đơn; tạo đơn thủ công cho khách hiện có hoặc khách mới; AJAX: lấy địa chỉ khách, tạo đơn nhanh.
- Quản lý khách hàng (Admin/Quản lý/Nhân viên): danh sách có tìm kiếm/phân trang.
- Quản lý nhân viên (Admin): thêm/sửa/xóa nhân viên; cập nhật hồ sơ cá nhân (nhân viên tự cập nhật).
- Hồ sơ cá nhân (Admin/Quản lý/Nhân viên): cập nhật thông tin, mật khẩu.
- Báo cáo (Admin/Quản lý): lọc theo ngày/khoảng thời gian; xuất CSV/XLSX/PDF; gồm best sellers, doanh thu theo ngày, tồn kho và trạng thái (hết hàng/còn ít/còn hàng).
- Cài đặt (Admin): tổng hợp danh sách nhân viên.
- Quản lý Nhà xuất bản/Nhà cung cấp/Danh mục (Admin/Quản lý): CRUD với tìm kiếm/phân trang.
- Khuyến mãi (Admin/Quản lý): tạo/sửa/xóa khuyến mãi; thêm/xóa chi tiết khuyến mãi theo sản phẩm (số lượng, tỉ lệ giảm giá); tìm sản phẩm bằng API nội bộ.

3) API nội bộ và bảo vệ
- API công khai có kiểm soát: products/providers/publishers (hỗ trợ phân trang, tìm kiếm, lọc); giới hạn tốc độ (rate limit), CORS, tùy chọn yêu cầu API key.
- API nhạy cảm theo quyền: customers (chỉ Admin/Quản lý), employees (chỉ Admin).
- API tìm sản phẩm cho khuyến mãi: search_products.
- Header phản hồi rate limit: X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset.

Ghi chú nguồn thực thi (tham khảo mã):
- Ánh xạ trang và phân quyền: index.php
- Chuẩn bị dữ liệu trang khách: app/controllers/PageController.php
- Hành động khách hàng (giỏ hàng, thanh toán, yêu thích, thông báo, đánh giá, địa chỉ, đổi mật khẩu, quên mật khẩu): app/controllers/CustomerActionController.php
- Trang và hành động nội bộ: app/controllers/EmployeeAuthController.php, app/controllers/EmployeeActionController.php, app/controllers/EmployeePageController.php
- API: app/controllers/ApiController.php
